# Knots

> Interactive visualization platform for Contact Graph theory, CS Diagrams, Dubins paths, and topological knot analysis.

**Live Demo** → [tilinhub.github.io/Knots](https://tilinhub.github.io/Knots/)

![React](https://img.shields.io/badge/React-19-61DAFB?logo=react&logoColor=white&style=flat-square)
![TypeScript](https://img.shields.io/badge/TypeScript-5.9-3178C6?logo=typescript&logoColor=white&style=flat-square)
![Vite](https://img.shields.io/badge/Vite-7-646CFF?logo=vite&logoColor=white&style=flat-square)
![License](https://img.shields.io/badge/License-MIT-green?style=flat-square)

---

## Overview

**Knots** is a research-grade web application for constructing and analyzing mathematical structures that arise in knot theory and combinatorial geometry. It provides an interactive canvas for working with disk contact graphs, envelope computation, Dubins path optimization, and rolling disk simulations — all rendered in real-time via SVG.

The project targets researchers and students working at the intersection of topology, computational geometry, and graph theory.

---

## Features

### Contact Graph Editor

- Place and drag disks on an infinite canvas; tangency relationships are detected automatically.
- Real-time **adjacency matrix** \(A\) where:
  \[A\_{ij} = \begin{cases} 1 & \text{if } d(c_i, c_j) \approx r_i + r_j \\ 0 & \text{otherwise} \end{cases}\]
- One-click matrix export to clipboard.
- Load predefined graphs from the built-in **Graph Catalog** (graph6 format via `loadAllGraphs`).

### Knot Mode

- Define a disk sequence with explicit chiralities to describe a knot diagram.
- **Elastic band envelope** follows the knot topology: the boundary slides along disk tangents rather than being pinned to anchor points.
- Automatic fallback to robust convex hull when the topology is underdetermined.
- Envelope computed by `KnotEnvelopeComputer`, which implements the shared `EnvelopeComputer` interface.

### Rolling Mode

- Simulate a disk rolling along the envelope formed by a set of support disks.
- Dynamic recomputation of the convex hull and contact matrix at every step.
- Trace the **roulette/cycloid** path generated by the rolling disk center.
- Precise angular controls: angle, speed, and rolling direction.

### Dubins Paths

- Compute optimal bitangent paths between disks using angular Dubins geometry.
- Length breakdown: total, straight segments, and arc contributions.
- Navigate between configurations through the contact graph.

### Precision Editor

- Coordinate system: **50 px = 1 logical unit (u)**.
- Numeric coordinate panel for exact placement.
- Geometric continuity validation (C0), arc length, and chord length display.
- Intersection detection between path segments.

---

## Architecture

The codebase follows a strict **layered architecture** with zero UI dependencies in the core layer.

```
src/
├── app/                    # React entry, routing, app wiring
├── core/                   # Pure logic — no React, no DOM
│   ├── geometry/           # Computational geometry
│   │   ├── dubins/         # Dubins path engine (dubins.ts, angularDubins.ts)
│   │   ├── contactGraph.ts # Bounded-curvature graph & envelope path finder
│   │   ├── EnvelopeComputer.ts  # Shared interface for envelope strategies
│   │   ├── ElasticEnvelope.ts   # Elastic band implementation
│   │   ├── CSEnvelope.ts        # CS diagram envelope
│   │   ├── robustHull.ts        # Robust convex hull fallback
│   │   ├── collision.ts         # Disk collision detection
│   │   ├── regionDetection.ts   # Topological region detection
│   │   └── rolling.ts           # Rolling disk geometry
│   ├── math/               # Mathematical classes
│   │   ├── DubinsPath.ts   # Dubins path class
│   │   ├── KnotLengthCalculator.ts
│   │   └── arc.ts
│   ├── algorithms/         # Graph algorithms (pathfinder)
│   ├── model/              # Domain entities and scene model
│   ├── types/              # Shared TypeScript types (CSDisk, etc.)
│   └── utils/
├── features/               # UI features (each owns components + logic)
│   ├── knot/               # Knot mode (KnotEnvelopeComputer)
│   ├── dubins/             # Dubins mode
│   ├── rolling/            # Rolling mode
│   ├── catalog/            # Graph catalog browser
│   ├── gallery/            # Saved configurations gallery
│   ├── analysis/           # Graph analysis tools
│   └── editor/             # Precision editor
├── renderer/               # SVG/Canvas rendering layers
│   └── layers/             # BaseLayer, KnotLayer, DubinsLayer, StandardLayer
├── io/                     # Graph parsing (graph6, loadAllGraphs)
├── ui/                     # Reusable primitive components
└── styles/                 # Global CSS

tests/                      # Mirrors src/core/ structure
├── core/
│   ├── geometry/           # Geometry tests + envelope regression
│   └── math/               # DubinsPath unit tests
```

**Key architectural rule:** `core/` has zero imports from `features/`, `renderer/`, or `ui/`. Data flows strictly downward.

---

## Tech Stack

| Layer               | Technology                    |
| ------------------- | ----------------------------- |
| Framework           | React 19 + TypeScript 5.9     |
| Bundler             | Vite 7                        |
| Rendering           | SVG (custom layers)           |
| Graph visualization | vis-network / vis-data        |
| Linting             | ESLint 9 + typescript-eslint  |
| Formatting          | Prettier 3                    |
| CI / Deploy         | GitHub Actions → GitHub Pages |

---

## Getting Started

**Requirements:** Node.js ≥ 18

```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Type-check
npm run typecheck

# Lint
npm run lint

# Production build
npm run build

# Run all checks (format + lint + typecheck + build)
npm run check
```

The app will be available at `http://localhost:5173`.

---

## Mathematical Background

### Contact Graphs

A **contact graph** of a disk packing is the graph \(G = (V, E)\) where each vertex represents a disk and each edge represents a tangency between two disks. This project focuses on disk packings arising from knot diagrams, where each disk corresponds to a region bounded by the knot.

### Dubins Paths

A **Dubins path** is the shortest curve connecting two oriented points in the plane, constrained to a minimum turning radius. The engine here extends classical Dubins to operate on disk sequences, computing optimal bitangent trajectories through the contact graph.

### Elastic Band Envelope

The envelope of a disk configuration is computed as a closed curve that slides along outer tangent lines between consecutive disks in a sequence, respecting chirality constraints. The `KnotEnvelopeComputer` implements this strategy with a robust fallback to convex hull when the topology is underdetermined.

---

## License

MIT © [TilinHub](https://github.com/TilinHub)
